<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ì˜ ì²« ìˆ˜ìµ ë©”ì´íŠ¸ ë§¤ì¹­</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;800&display=swap');
        
        :root {
            --point-color: #3CCCD4; 
            --point-secondary: #6366F1;
            --bg-white: #FFFFFF;
            --btn-bg: rgba(147, 51, 234, 0.1);
            --btn-text: #7C3AED;
        }

        body { 
            font-family: 'Pretendard', sans-serif; 
            background-color: #F9FAFB; 
            color: #1F2937;
            display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0;
        }

        .main-card {
            width: 100%; max-width: 480px; min-height: 850px;
            background: var(--bg-white); border-radius: 3.5rem;
            box-shadow: 0 40px 100px -20px rgba(60, 204, 212, 0.12);
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 8rem 1.5rem 4rem 1.5rem; position: relative; border: 1px solid rgba(60, 204, 212, 0.08);
        }

        .step { display: none; width: 100%; flex-direction: column; align-items: center; text-align: center; }
        .step.active { display: flex; animation: fadeIn 0.6s ease-out; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .back-btn {
            position: absolute; top: 2.5rem; left: 1.5rem;
            color: #94A3B8; cursor: pointer; transition: all 0.2s ease;
            display: none; z-index: 50;
        }
        .back-btn:hover { color: var(--point-color); transform: translateX(-3px); }

        .animated-title {
            background: linear-gradient(90deg, #3CCCD4, #6366F1, #3CCCD4);
            background-size: 200% auto;
            color: transparent; -webkit-background-clip: text; background-clip: text;
            animation: gradientMove 4s linear infinite; display: inline-block;
        }
        @keyframes gradientMove { to { background-position: 200% center; } }

        .glass-orb {
            width: 160px; height: 160px; border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 1) 0%, rgba(60, 204, 212, 0.3) 30%, rgba(147, 51, 234, 0.2) 60%, rgba(59, 130, 246, 0.1) 100%);
            box-shadow: inset -10px -10px 30px rgba(60, 204, 212, 0.2), inset 10px 10px 30px rgba(255, 255, 255, 0.8), 0 20px 50px rgba(60, 204, 212, 0.1);
            backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
            position: relative; margin: 2rem 0; animation: float 4s infinite ease-in-out;
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        .tarot-card {
            background: #FFFFFF; border: 2px solid #F3F4F6; border-radius: 1.25rem;
            width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 1.5rem; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .tarot-card:hover { border-color: var(--point-color); background: #f0fdfe; transform: translateY(-5px); }
        .tarot-card span.emoji { font-size: 2rem; margin-bottom: 0.5rem; }
        .tarot-card span.label { font-size: 0.95rem; font-weight: 800; color: #4B5563; line-height: 1.3; }

        .capsule-button {
            background-color: var(--btn-bg); color: var(--btn-text);
            border-radius: 9999px; width: 100%; padding: 1.1rem;
            font-weight: 700; font-size: 1.1rem; transition: all 0.2s ease; margin-top: 1.5rem;
        }
        .capsule-button:hover { background-color: rgba(147, 51, 234, 0.15); transform: scale(1.02); }

        .best-badge {
            background: #3CCCD4; color: white; padding: 4px 14px; border-radius: 20px;
            font-size: 12px; font-weight: 800; margin-bottom: 12px; display: inline-block;
            box-shadow: 0 4px 12px rgba(60, 204, 212, 0.2);
        }

        #progress-bar { transition: width 0.4s ease; background: linear-gradient(90deg, #3CCCD4 0%, #7C3AED 100%); }
        .choice-summary { background-color: #F9FAFB; border-radius: 1.5rem; width: 100%; padding: 1.5rem; margin-top: 2rem; border: 1px dashed rgba(60, 204, 212, 0.2); text-align: center; }

        .loading-dots:after {
            content: '.';
            animation: dots 1.5s steps(5, end) infinite;
        }
        @keyframes dots { 0%, 20% { content: '.'; } 40% { content: '..'; } 60% { content: '...'; } 80%, 100% { content: ''; } }
    </style>
</head>
<body>

<div id="app" class="main-card">
    <div id="back-button" class="back-btn" onclick="prevStep()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7" />
        </svg>
    </div>

    <div id="progress-container" class="absolute top-24 left-0 w-full px-10 hidden">
        <div class="flex justify-between items-center mb-2 px-1">
            <span class="text-[11px] font-bold text-[#3CCCD4] uppercase tracking-widest">ë§¤ì¹­ ì§„í–‰ë¥ </span>
            <span id="percent-text" class="text-[11px] font-bold text-[#3CCCD4]">0%</span>
        </div>
        <div class="w-full bg-gray-100 h-1.5 rounded-full overflow-hidden">
            <div id="progress-bar" class="h-full w-0 shadow-[0_0_8px_rgba(60,204,212,0.4)]"></div>
        </div>
    </div>

    <div id="step-0" class="step active">
        <h1 class="text-[26px] font-extrabold mb-2 leading-tight tracking-tight animated-title">ë‚˜ì˜ ì²« ìˆ˜ìµ ë©”ì´íŠ¸ ë§¤ì¹­</h1>
        <div class="glass-orb"></div>
        <p class="text-gray-500 text-[15px] mb-2 leading-relaxed font-medium">ë‹¹ì‹ ì˜ ê²½í—˜ì„ ë¶„ì„í•˜ì—¬ ìŠ¤íƒ€í„° ë“±ê¸‰ì—ì„œ<br>ê°€ì¥ ìˆ˜ìˆ˜ë£Œê°€ ë†’ì€ í”„ë¡œê·¸ë¨ì„ ì°¾ì•„ë“œë¦´ê²Œìš”.</p>
        <button onclick="startTest()" class="capsule-button">ì‹œì‘í•˜ê¸° âœ¨</button>
    </div>

    <div id="step-1" class="step">
        <h2 class="text-[20px] font-bold mb-8 text-gray-800 animated-title">ì§€ê¸ˆ ë°”ë¡œ í¬ìŠ¤íŒ…í•  ìˆ˜ ìˆëŠ” ì£¼ì œëŠ”?<br>(ë˜ëŠ” ê¸°ì¡´ í¬ìŠ¤íŒ… ì£¼ì œëŠ”?)</h2>
        <div class="flex flex-col gap-4 w-full px-4">
            <div onclick="save('q1', 'ì—¬í–‰ í¬ìŠ¤íŒ…', 'âœˆï¸')" class="tarot-card">
                <span class="emoji">âœˆï¸</span>
                <span class="label">ì„¤ë ˜ì´ ê°€ë“í–ˆë˜ ì—¬í–‰ê³¼ íœ´ì‹</span>
            </div>
            <div onclick="save('q1', 'ì¼ìƒÂ·ë¦¬ë¹™ í¬ìŠ¤íŒ…', 'ğŸ ')" class="tarot-card">
                <span class="emoji">ğŸ </span>
                <span class="label">ë‚˜ì˜ ì·¨í–¥ì´ ë‹´ê¸´ ê³µê°„ê³¼ ì¼ìƒ</span>
            </div>
        </div>
    </div>

    <div id="step-2" class="step">
        <h2 class="text-[20px] font-bold mb-8 text-gray-800 animated-title">ë‚´ê°€ ì˜ ì´ìš©í–ˆë˜ ìƒí’ˆì€?</h2>
        <div id="q2-container" class="grid grid-cols-2 gap-3 w-full px-4"></div>
    </div>

    <div id="step-3" class="step">
        <h2 class="text-[20px] font-bold mb-8 text-gray-800 animated-title">ë‚´ ë¸”ë¡œê·¸ëŠ” í•˜ë£¨ í‰ê· <br>ì´ ì •ë„ ë°©ë¬¸í•´ìš”!</h2>
        <div class="flex flex-col gap-3 w-full px-4">
            <div onclick="save('q3', '0~300ëª…', 'ğŸŒ±')" class="tarot-card"><span>ğŸŒ±</span><span class="label">0~300ëª…</span></div>
            <div onclick="save('q3', '300~2,000ëª…', 'ğŸŒ¿')" class="tarot-card"><span>ğŸŒ¿</span><span class="label">300~2,000ëª…</span></div>
            <div onclick="save('q3', '2,000ëª… ì´ìƒ', 'ğŸŒ³')" class="tarot-card"><span>ğŸŒ³</span><span class="label">2,000ëª… ì´ìƒ</span></div>
        </div>
    </div>

    <div id="step-loading" class="step">
        <div class="glass-orb scale-75"></div>
        <h2 class="text-[21px] font-bold text-gray-800 animated-title">
            ë°ì´í„° ë¶„ì„ ì¤‘<span class="loading-dots"></span><br>
            <span class="text-sm font-medium text-gray-500 mt-2 block">ê°€ì¥ ì•Œë§ì€ ì œíœ´ë§í¬ë¥¼ ì°¾ëŠ” ì¤‘ì…ë‹ˆë‹¤</span>
        </h2>
    </div>

    <div id="step-result" class="step">
        <div class="mb-2 text-[#3CCCD4] text-[12px] font-black tracking-widest uppercase" id="persona-name"></div>
        <div class="w-full mt-4">
            <div class="best-badge">ìŠ¤íƒ€í„° ë“±ê¸‰ ìµœê³  ìˆ˜ìˆ˜ë£Œìœ¨ ì§€ê¸‰ âœ¨</div>
            <h2 id="final-brand-main" class="text-[52px] font-black mb-10 text-gray-900 tracking-tighter leading-tight"></h2>
        </div>
        <div class="grid grid-cols-3 gap-3 w-full mb-8">
            <div class="bg-gray-50 py-4 rounded-2xl border border-gray-100"><p class="text-[10px] text-gray-400 font-bold mb-1 uppercase">ë§¤ì¹­ë ¥</p><p class="font-extrabold text-[#3CCCD4] text-lg">TOP</p></div>
            <div class="bg-gray-50 py-4 rounded-2xl border border-gray-100"><p class="text-[10px] text-gray-400 font-bold mb-1 uppercase">ìˆ˜ìµì„±</p><p class="font-extrabold text-[#3CCCD4] text-lg">ìµœìƒ</p></div>
            <div class="bg-gray-50 py-4 rounded-2xl border border-gray-100"><p class="text-[10px] text-gray-400 font-bold mb-1 uppercase">ê¶í•©ë„</p><p class="font-extrabold text-[#3CCCD4] text-lg"><span id="match-rate"></span></p></div>
        </div>
        <button onclick="location.reload()" class="capsule-button">ì œíœ´ë§í¬ ìƒì„±í•˜ëŸ¬ ê°€ê¸° ğŸ”—</button>
        <div class="choice-summary">
            <p class="text-[11px] font-black text-[#3CCCD4] uppercase mb-2">ë‚˜ì˜ ì„ íƒ ë¦¬í¬íŠ¸</p>
            <p id="user-review" class="text-[13px] font-semibold text-gray-600 leading-relaxed"></p>
        </div>
    </div>
</div>

<script>
    let answers = {};
    let currentStepIndex = 0;

    const q2Options = {
        'ì—¬í–‰ í¬ìŠ¤íŒ…': [
            { text: 'ìˆ™ì†Œ', icon: 'ğŸ¨' }, { text: 'í•­ê³µê¶Œ', icon: 'âœˆï¸' },
            { text: 'e-sim', icon: 'ğŸ“±' }, { text: 'ì•¡í‹°ë¹„í‹°/íˆ¬ì–´', icon: 'ğŸ¡' },
            { text: 'ë Œí„°ì¹´', icon: 'ğŸš—' }
        ],
        'ì¼ìƒÂ·ë¦¬ë¹™ í¬ìŠ¤íŒ…': [
            { text: 'ì†Œí’ˆ', icon: 'ğŸ•¯ï¸' }, { text: 'ê°€êµ¬', icon: 'ğŸ›‹ï¸' },
            { text: 'ê°€ì „', icon: 'ğŸ“º' }, { text: 'ì¸í…Œë¦¬ì–´', icon: 'ğŸ–¼ï¸' }
        ]
    };

    const affiliateMapping = {
        'ìˆ™ì†Œ': { brand: 'ì•„ê³ ë‹¤', persona: 'ìŠ¤í…Œì´ íë ˆì´í„°' },
        'í•­ê³µê¶Œ': { brand: 'íŠ¸ë¦½ë‹·ì»´', persona: 'ê¸€ë¡œë²Œ íŠ¸ë˜ë¸”ëŸ¬' },
        'e-sim': { brand: 'ìœ ì‹¬ì‚¬', persona: 'ë°ì´í„° ì»¤ë„¥í„°' },
        'ì•¡í‹°ë¹„í‹°/íˆ¬ì–´': { brand: 'í´ë£©', persona: 'ìµìŠ¤í”¼ë¦¬ì–¸ìŠ¤ ë””ë ‰í„°' },
        'ë Œí„°ì¹´': { brand: 'í´ë£©', persona: 'ìŠ¤ë§ˆíŠ¸ ë¡œë“œ ê°€ì´ë“œ' },
        'ì†Œí’ˆ': { brand: 'ì˜¤ëŠ˜ì˜ì§‘', persona: 'ë¼ì´í”„ìŠ¤íƒ€ì¼ ì—ë””í„°' },
        'ê°€êµ¬': { brand: 'ì˜¤ëŠ˜ì˜ì§‘', persona: 'í™ˆ ìŠ¤íƒ€ì¼ë¦¬ìŠ¤íŠ¸' },
        'ê°€ì „': { brand: 'ì¿ íŒ¡', persona: 'í…Œí¬ ì–¼ë¦¬ì–´ë‹µí„°' },
        'ì¸í…Œë¦¬ì–´': { brand: 'ì˜¤ëŠ˜ì˜ì§‘', persona: 'ê³µê°„ ë””ë ‰í„°' }
    };

    function startTest() { 
        document.getElementById('progress-container').classList.remove('hidden'); 
        nextStep(1); 
    }
    
    function nextStep(n) {
        currentStepIndex = n;
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        const backBtn = document.getElementById('back-button');
        backBtn.style.display = (n >= 1 && n <= 3) ? 'block' : 'none';
        if (n === 2) renderQ2();
        let targetId = (n === 'loading') ? 'step-loading' : (n === 'result' ? 'step-result' : 'step-' + n);
        document.getElementById(targetId).classList.add('active');
        const progressMap = { 0: 0, 1: 25, 2: 50, 3: 75, 'loading': 90, 'result': 100 };
        document.getElementById('progress-bar').style.width = (progressMap[n] || 0) + '%';
        document.getElementById('percent-text').innerText = (progressMap[n] || 0) + '%';
    }

    function renderQ2() {
        const container = document.getElementById('q2-container');
        container.innerHTML = '';
        const selectedMemory = answers.q1.text;
        q2Options[selectedMemory].forEach(opt => {
            const div = document.createElement('div');
            div.className = 'tarot-card';
            div.onclick = () => save('q2', opt.text, opt.icon);
            div.innerHTML = `<span class="emoji">${opt.icon}</span><span class="label">${opt.text}</span>`;
            container.appendChild(div);
        });
    }

    function prevStep() {
        if (currentStepIndex === 1) { document.getElementById('progress-container').classList.add('hidden'); nextStep(0); }
        else if (currentStepIndex > 1) { nextStep(currentStepIndex - 1); }
    }

    function save(q, val, icon) {
        answers[q] = { text: val, icon: icon };
        const cur = parseInt(q.charAt(1));
        if (cur < 3) nextStep(cur + 1);
        else { nextStep('loading'); setTimeout(() => calculate(), 2000); }
    }

    function calculate() {
        const result = affiliateMapping[answers.q2.text] || { brand: 'ì¿ íŒ¡', persona: 'ìŠ¤ë§ˆíŠ¸ ì‡¼í¼' };
        document.getElementById('persona-name').innerText = "ë§¤ì¹­ í˜ë¥´ì†Œë‚˜: " + result.persona;
        document.getElementById('final-brand-main').innerText = result.brand;
        document.getElementById('user-review').innerHTML = `ìµœê·¼ ì´ìš©í•œ <span class="text-gray-900 font-bold">${answers.q2.icon} ${answers.q2.text}</span> ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ, <span class="text-gray-900 font-bold">${answers.q3.icon} ${answers.q3.text}</span> ê·œëª¨ ë¸”ë¡œê·¸ì— ê¸°ë¡í•˜ëŠ” í¬ë¦¬ì—ì´í„°`;
        document.getElementById('match-rate').innerText = (Math.floor(Math.random() * (100 - 95 + 1)) + 95) + '%';
        nextStep('result');
    }
</script>
</body>
</html>
